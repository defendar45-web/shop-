{% extends 'base/base.html' %}

{% block content %}
  <div class="container mx-auto py-8">
    <h4 class="text-2xl font-semibold mb-4">Результаты поиска</h4>
    <h2 class="text-xl mb-6">Вы искали: {{ query }}</h2>

    {% if products or categories %}
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
        {% for product in products %}
          <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <div class="aspect-w-4 aspect-h-3">
              <img src="{{ product.get_image }}" alt="{{ product.name }}" class="object-cover" onerror="this.src='/static/img/no_image.png'"><!-- Используем событие onerror для отображения заглушки -->
            </div>
            <div class="p-4">
              <p class="text-gray-600 text-sm">{{ product.category }}</p>
              <h4 class="text-lg font-medium mb-2">{{ product.name }}</h4>
              <div class="flex items-center justify-between">
                <p class="text-gray-800">${{ product.price }}</p>
                <a href="{% url 'add_to_cart' product_id=product.id %}" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">+</a>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>


    {% else %}
      <p class="text-gray-500">Ничего не найдено</p>
    {% endif %}
  </div>
{% endblock %}
