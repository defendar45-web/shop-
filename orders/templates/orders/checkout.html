{% extends 'base/base.html' %}

{% block content %}
<div class="min-h-screen bg-gray-100 py-12 px-4">
  <div class="max-w-6xl mx-auto">

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="mb-10">
      <h1 class="text-3xl font-bold text-gray-900">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h1>
      <p class="text-gray-500 mt-1">–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–∫–∞–∑</p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">

      <!-- –§–æ—Ä–º–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ -->
      <form method="POST"
            class="bg-white rounded-2xl shadow-lg p-8 space-y-6">
        {% csrf_token %}

        <h2 class="text-xl font-semibold text-gray-800">–î–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç–∞–≤–∫–∏</h2>

        <div>
          <label class="text-sm text-gray-600">–ò–º—è</label>
          <input name="name" required
                 class="mt-1 w-full rounded-xl border border-gray-300 px-4 py-3
                        focus:border-blue-500 focus:ring-2 focus:ring-blue-100
                        transition outline-none">
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="text-sm text-gray-600">–ì–æ—Ä–æ–¥</label>
            <input name="city" required
                   class="mt-1 w-full rounded-xl border border-gray-300 px-4 py-3
                          focus:border-blue-500 focus:ring-2 focus:ring-blue-100
                          transition outline-none">
          </div>

          <div>
            <label class="text-sm text-gray-600">–£–ª–∏—Ü–∞</label>
            <input name="street" required
                   class="mt-1 w-full rounded-xl border border-gray-300 px-4 py-3
                          focus:border-blue-500 focus:ring-2 focus:ring-blue-100
                          transition outline-none">
          </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div>
            <label class="text-sm text-gray-600">–î–æ–º</label>
            <input name="house_number" required
                   class="mt-1 w-full rounded-xl border border-gray-300 px-4 py-3
                          focus:border-blue-500 focus:ring-2 focus:ring-blue-100
                          transition outline-none">
          </div>

          <div>
            <label class="text-sm text-gray-600">–≠—Ç–∞–∂</label>
            <input type="number" name="floor"
                   class="mt-1 w-full rounded-xl border border-gray-300 px-4 py-3
                          focus:border-blue-500 focus:ring-2 focus:ring-blue-100
                          transition outline-none">
          </div>
        </div>

        <div>
          <label class="text-sm text-gray-600">–¢–µ–ª–µ—Ñ–æ–Ω</label>
          <input name="phone_number" required
                 class="mt-1 w-full rounded-xl border border-gray-300 px-4 py-3
                        focus:border-blue-500 focus:ring-2 focus:ring-blue-100
                        transition outline-none">
        </div>

        <div>
          <label class="text-sm text-gray-600">Email</label>
          <input type="email" name="email" required
                 class="mt-1 w-full rounded-xl border border-gray-300 px-4 py-3
                        focus:border-blue-500 focus:ring-2 focus:ring-blue-100
                        transition outline-none">
        </div>

        <button type="submit"
                class="w-full mt-4 py-4 rounded-xl bg-blue-600 text-white font-semibold
                       hover:bg-blue-700 transition shadow">
          üõí –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
        </button>
      </form>

      <!-- –°–≤–æ–¥–∫–∞ –∑–∞–∫–∞–∑–∞ -->
      <div class="bg-white rounded-2xl shadow-lg p-6 h-fit">
        <h2 class="text-xl font-semibold text-gray-800 mb-6">–í–∞—à –∑–∞–∫–∞–∑</h2>

        <ul class="space-y-4">
          {% for item in cart_items %}
          <li class="flex items-center justify-between">
            <div class="flex items-center gap-4">
              <img src="{{ item.product.get_image }}"
                   class="w-16 h-16 rounded-xl object-cover">
              <div>
                <p class="font-medium text-gray-800">{{ item.product.name }}</p>
                <p class="text-sm text-gray-500">–¶–µ–Ω–∞: ${{ item.product.price }}</p>
              </div>
            </div>
            <span class="font-semibold text-gray-800">
              {{ item.get_total_price }} $
            </span>
          </li>
          {% endfor %}
        </ul>

        <div class="border-t mt-6 pt-4 space-y-2 text-sm">
          <div class="flex justify-between">
            <span class="text-gray-600">–ü–æ–¥—ã—Ç–æ–≥</span>
            <span>${{ total_price }}</span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600">–î–æ—Å—Ç–∞–≤–∫–∞</span>
            <span class="text-green-600">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
          </div>
          <div class="flex justify-between text-lg font-bold">
            <span>–ò—Ç–æ–≥–æ</span>
            <span class="text-blue-600">${{ total_price }}</span>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
{% endblock %}
