{% extends 'base/base.html' %}


{% block content %}
<div class="min-h-screen bg-gray-100 py-12 px-4">
    <div class="max-w-5xl mx-auto rounded-3xl shadow-lg overflow-hidden bg-gray-50">

       <div class="px-8 py-6 border-b border-gray-200 flex items-center justify-between">

    <!-- Заголовок -->
    <div>
        <h1 class="text-3xl font-bold text-gray-900">Настройки профиля</h1>
        <p class="text-gray-500 mt-1">Управляйте личными данными и безопасностью</p>
    </div>

    <!-- Кнопка назад -->
    <a href="{% url 'profile' %}"
       class="flex items-center gap-2 px-4 py-2 rounded-full
              bg-white border border-gray-300
              text-gray-700 font-medium
              hover:bg-gray-50 hover:shadow transition-shadow">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
             viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 19l-7-7 7-7" />
        </svg>
        Назад
    </a>

</div>

        <!-- Messages -->
        {% if messages %}
        <div class="px-8 pt-6">
            {% for message in messages %}
                <div class="mb-4 p-4 rounded-xl
                            {% if message.tags == 'error' %}bg-red-50 border border-red-200 text-red-800
                            {% elif message.tags == 'success' %}bg-green-50 border border-green-200 text-green-800
                            {% else %}bg-blue-50 border border-blue-200 text-blue-800{% endif %} flex items-center gap-3">
                    <span>{{ message }}</span>
                </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Forms -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-10 p-8">

            <!--  Password -->
            <div>
                <h2 class="text-xl font-semibold text-gray-800 mb-6"> Безопасность</h2>

                <form method="POST" id="password_form" class="space-y-5">
                    {% csrf_token %}

                    <div>
                        <label class="text-sm text-gray-600 mb-1 block">Текущий пароль</label>
                        <input type="password" name="current_password"
                               class="w-full rounded-2xl border border-gray-300 p-3 focus:border-[#00BEA2] focus:ring-1 focus:ring-[#00BEA2]"
                               placeholder="Введите текущий пароль">
                    </div>

                    <div>
                        <label class="text-sm text-gray-600 mb-1 block">Новый пароль</label>
                        <input type="password" name="new_password"
                               class="w-full rounded-2xl border border-gray-300 p-3 focus:border-[#00BEA2] focus:ring-1 focus:ring-[#00BEA2]"
                               placeholder="Новый пароль">
                    </div>

                    <div>
                        <label class="text-sm text-gray-600 mb-1 block">Подтвердите пароль</label>
                        <input type="password" name="confirm_password"
                               class="w-full rounded-2xl border border-gray-300 p-3 focus:border-[#00BEA2] focus:ring-1 focus:ring-[#00BEA2]"
                               placeholder="Повторите пароль">
                    </div>
                </form>
            </div>

            <!--  Profile -->
            <div>
                <h2 class="text-xl font-semibold text-gray-800 mb-6"> Личные данные</h2>

                <form method="POST" id="profile_form" class="space-y-5">
                    {% csrf_token %}

                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label class="text-sm text-gray-600 mb-1 block">Имя</label>
                            <input type="text" name="firstname" oninput="this.value = this.value.replace(/[^A-Za-zА-Яа-яЁё]/g, '')"
                                    required value="{{ first_name }}"
                                   class="w-full rounded-2xl border border-gray-300 p-3 focus:border-[#00BEA2] focus:ring-1 focus:ring-[#00BEA2]">
                        </div>

                        <div>
                            <label class="text-sm text-gray-600 mb-1 block">Фамилия</label>
                            <input type="text" name="lastname"
                                   oninput="this.value = this.value.replace(/[^A-Za-zА-Яа-яЁё]/g, '')"
                                   required
                                   value="{{ last_name }}"
                                   class="w-full rounded-2xl border border-gray-300 p-3 focus:border-[#00BEA2] focus:ring-1 focus:ring-[#00BEA2]">
                        </div>
                    </div>

                    <div>
                        <label class="text-sm text-gray-600 mb-1 block">Email</label>
                        <input type="email" name="email" value="{{ email }}"
                               class="w-full rounded-2xl border border-gray-300 p-3 focus:border-[#00BEA2] focus:ring-1 focus:ring-[#00BEA2]">
                    </div>

                    <div>
                        <label class="text-sm text-gray-600 mb-1 block">Адрес доставки</label>
                        <input type="text" name="address" value="{{ address }}"
                               class="w-full rounded-2xl border border-gray-300 p-3 focus:border-[#00BEA2] focus:ring-1 focus:ring-[#00BEA2]"
                               placeholder="Город, улица, дом">
                    </div>
                </form>
            </div>
        </div>

        <!-- Action Buttons on One Line -->
        <div class="px-8 pb-8 mt-6 flex flex-col sm:flex-row gap-4">
            <button type="submit"
                    name="password_submit"
                    form="password_form"
                    class="flex-1 py-3 rounded-2xl bg-gray-900 text-white font-semibold hover:bg-gray-800 transition">
                    Обновить пароль
            </button>

           <button type="submit"
                   name="profile_submit"
                   form="profile_form"
                   class="flex-1 py-3 rounded-2xl bg-[#00BEA2] text-white font-semibold hover:bg-[#05B197] transition">
                   Сохранить изменения
            </button>

        </div>

    </div>
</div>
{% endblock %}
